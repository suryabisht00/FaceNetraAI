# Post Upload - User Journey Flow

## ğŸ“± Complete User Journey

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    USER STARTS HERE                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚   User on any page (Feed/Home)     â”‚
         â”‚                                    â”‚
         â”‚  Desktop: Clicks "Add Post" navbar â”‚
         â”‚  Mobile: Taps "+" bottom nav       â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚    Navigate to /add-post page      â”‚
         â”‚                                    â”‚
         â”‚  âœ… Protected Route (Auth Check)  â”‚
         â”‚  âœ… Clean UI loads                â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚      Create Post Component         â”‚
         â”‚                                    â”‚
         â”‚  1ï¸âƒ£  Type content in textarea     â”‚
         â”‚  2ï¸âƒ£  (Optional) Click "Add Media" â”‚
         â”‚  3ï¸âƒ£  Select files from device     â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚      File Validation Layer         â”‚
         â”‚                                    â”‚
         â”‚  âœ… Check file types              â”‚
         â”‚  âœ… Check file sizes              â”‚
         â”‚  âœ… Max 10 files limit            â”‚
         â”‚  âŒ Show errors if invalid         â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚       Media Preview Grid           â”‚
         â”‚                                    â”‚
         â”‚  ğŸ“· Image thumbnails              â”‚
         â”‚  ğŸ¥ Video previews                â”‚
         â”‚  ğŸ—‘ï¸  Remove button on hover       â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚    Select Visibility Setting       â”‚
         â”‚                                    â”‚
         â”‚  ğŸŒ Public (default)              â”‚
         â”‚  ğŸ‘¥ Friends Only                  â”‚
         â”‚  ğŸ”’ Private                       â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚       User Clicks "Post"           â”‚
         â”‚                                    â”‚
         â”‚  â³ Button shows "Posting..."     â”‚
         â”‚  ğŸš« Form inputs disabled          â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚      Upload Media to Cloudinary    â”‚
         â”‚                                    â”‚
         â”‚  For each media file:              â”‚
         â”‚  1. Create FormData                â”‚
         â”‚  2. POST to /api/upload            â”‚
         â”‚  3. Get secure URL back            â”‚
         â”‚  4. Update progress bar            â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚        Progress Tracking           â”‚
         â”‚                                    â”‚
         â”‚  â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘â–‘â–‘â–‘ 75%          â”‚
         â”‚  "Uploading... 75%"                â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚      Create Post in Database       â”‚
         â”‚                                    â”‚
         â”‚  POST to /api/posts                â”‚
         â”‚  {                                 â”‚
         â”‚    content,                        â”‚
         â”‚    postType,                       â”‚
         â”‚    visibility,                     â”‚
         â”‚    media: [uploadedURLs]          â”‚
         â”‚  }                                 â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚      Server Processing             â”‚
         â”‚                                    â”‚
         â”‚  âœ… Validate JWT token            â”‚
         â”‚  âœ… Validate post data            â”‚
         â”‚  âœ… Create Post record            â”‚
         â”‚  âœ… Create PostMedia records      â”‚
         â”‚  âœ… Return post with relations    â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚         Success Response           â”‚
         â”‚                                    â”‚
         â”‚  Progress: 100%                    â”‚
         â”‚  âœ… Post created successfully      â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚         Cleanup & Redirect         â”‚
         â”‚                                    â”‚
         â”‚  1. Clear form state               â”‚
         â”‚  2. Revoke blob URLs               â”‚
         â”‚  3. Call onSuccess callback        â”‚
         â”‚  4. Navigate to /feed              â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚        Feed Page Loads             â”‚
         â”‚                                    â”‚
         â”‚  âœ… Fetch posts via /api/posts    â”‚
         â”‚  âœ… New post appears at top       â”‚
         â”‚  âœ… User can interact (like, etc) â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    JOURNEY COMPLETE! ğŸ‰                      â”‚
â”‚             User successfully created a post                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ”„ Alternative Paths

### Error Scenarios

#### âŒ File Size Too Large
```
User selects file > Validation fails > Error shown
"File size exceeds limit. Max 10MB per image"
User can: Remove file, select different file
```

#### âŒ Invalid File Type
```
User selects .pdf > Validation fails > Error shown
"Only image and video files are allowed"
User can: Select valid file type
```

#### âŒ No Authentication
```
User tries to post > Auth check fails > Redirect to /login
User must: Log in first
```

#### âŒ Network Error
```
Upload fails > Retry mechanism > Error shown if persistent
"Failed to upload media. Please try again."
User can: Retry, cancel
```

#### âŒ Empty Content
```
User clicks Post with no content/media > Validation fails
"Please add some content or media to your post"
User must: Add content or media
```

---

## ğŸ“Š Data Flow Diagram

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚          â”‚         â”‚          â”‚         â”‚          â”‚
â”‚  Client  â”‚â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚  API     â”‚â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚ Database â”‚
â”‚          â”‚         â”‚  Route   â”‚         â”‚          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
     â”‚                    â”‚                     â”‚
     â”‚ POST /api/upload   â”‚                     â”‚
     â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶                     â”‚
     â”‚                    â”‚ Upload to           â”‚
     â”‚                    â”‚ Cloudinary          â”‚
     â”‚â—€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                     â”‚
     â”‚ { url, publicId }  â”‚                     â”‚
     â”‚                    â”‚                     â”‚
     â”‚ POST /api/posts    â”‚                     â”‚
     â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶                     â”‚
     â”‚                    â”‚ INSERT Post         â”‚
     â”‚                    â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶
     â”‚                    â”‚                     â”‚
     â”‚                    â”‚â—€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
     â”‚â—€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                     â”‚
     â”‚ { success, data }  â”‚                     â”‚
     â”‚                    â”‚                     â”‚
```

---

## ğŸ¨ Component Hierarchy

```
AddPostPage
    â”‚
    â”œâ”€â”€ ProtectedRoute
    â”‚   â””â”€â”€ Auth Check
    â”‚
    â”œâ”€â”€ Header Section
    â”‚   â”œâ”€â”€ Back Button
    â”‚   â”œâ”€â”€ Title
    â”‚   â””â”€â”€ Description
    â”‚
    â”œâ”€â”€ CreatePost Component â˜…
    â”‚   â”œâ”€â”€ User Avatar
    â”‚   â”œâ”€â”€ Content Textarea
    â”‚   â”œâ”€â”€ Media Preview Grid
    â”‚   â”‚   â””â”€â”€ MediaItem[]
    â”‚   â”‚       â”œâ”€â”€ Image/Video
    â”‚   â”‚       â””â”€â”€ Remove Button
    â”‚   â”œâ”€â”€ Error Message
    â”‚   â”œâ”€â”€ Progress Bar
    â”‚   â””â”€â”€ Action Bar
    â”‚       â”œâ”€â”€ Add Media Button
    â”‚       â”œâ”€â”€ Visibility Selector
    â”‚       â””â”€â”€ Post Button
    â”‚
    â”œâ”€â”€ Tips Section
    â”‚   â””â”€â”€ Posting Guidelines
    â”‚
    â””â”€â”€ Quick Actions
        â”œâ”€â”€ View Feed Link
        â””â”€â”€ My Profile Link
```

---

## ğŸ”‘ State Management Flow

```
CreatePost Component State:

Initial State:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ content: ""             â”‚
â”‚ mediaFiles: []          â”‚
â”‚ visibility: "PUBLIC"    â”‚
â”‚ isUploading: false      â”‚
â”‚ uploadProgress: 0       â”‚
â”‚ error: null             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼ User types text
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ content: "Hello..."     â”‚
â”‚ mediaFiles: []          â”‚
â”‚ ...                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼ User adds media
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ content: "Hello..."     â”‚
â”‚ mediaFiles: [           â”‚
â”‚   {                     â”‚
â”‚     file: File,         â”‚
â”‚     preview: "blob:...", â”‚
â”‚     type: "image",      â”‚
â”‚     id: "abc123"        â”‚
â”‚   }                     â”‚
â”‚ ]                       â”‚
â”‚ ...                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼ User clicks Post
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ isUploading: true       â”‚
â”‚ uploadProgress: 0       â”‚
â”‚ error: null             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼ Upload in progress
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ isUploading: true       â”‚
â”‚ uploadProgress: 45      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼ Success
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ isUploading: false      â”‚
â”‚ uploadProgress: 100     â”‚
â”‚ All state reset         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ¯ Success Indicators

### Visual Feedback to User:

1. **File Selection** âœ…
   - Preview appears immediately
   - File count updates

2. **Validation** âœ…
   - Green checkmarks for valid files
   - Red errors for invalid files

3. **Upload Progress** âœ…
   - Progress bar animation
   - Percentage display

4. **Completion** âœ…
   - Success message
   - Redirect to feed
   - New post visible

---

## ğŸ“± Responsive Journey

### Desktop Experience
```
Wide Screen â†’ Full Features
â”œâ”€â”€ Sidebar navigation
â”œâ”€â”€ Large media preview
â”œâ”€â”€ Hover effects
â””â”€â”€ Keyboard shortcuts
```

### Tablet Experience
```
Medium Screen â†’ Adapted Layout
â”œâ”€â”€ Collapsed sidebar
â”œâ”€â”€ Medium media preview
â””â”€â”€ Touch + click support
```

### Mobile Experience
```
Small Screen â†’ Mobile-First
â”œâ”€â”€ Bottom navigation
â”œâ”€â”€ Full-width components
â”œâ”€â”€ Touch-optimized buttons
â””â”€â”€ Vertical scrolling
```

---

## ğŸŠ Journey Complete!

User successfully:
- âœ… Created engaging content
- âœ… Uploaded media seamlessly
- âœ… Shared with chosen audience
- âœ… Saw post in feed immediately

**Ready for the next post! ğŸš€**
